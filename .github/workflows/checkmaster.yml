name: Works with Zig master
on: 
  push:
    branches:
    - master
  pull_request:
    branches:
    - master
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:
  
jobs:
  ci:
    strategy:
      matrix:
        # platform: [ubuntu-latest, windows-latest, macos-latest]
        platform: [ubuntu-latest]
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v3
      - uses: goto-bus-stop/setup-zig@v2
        with:
          version: master
      - name: Check zig version
        run: zig version
      - name: Build 
        run: |
          mkdir -p build
          cp img/failing.svg build/badge.svg
          cp README.md build/
          zig build && cp img/passing.svg build.svg
      - name: Deploy to gh-pages
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: build
          branch: gh-pages
